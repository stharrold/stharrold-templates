# Example GitHub Actions workflow demonstrating secrets management
# This is a reference/template - customize for your actual workflows
#
# Security note: This workflow only uses secrets.* references which are secure.
# It does not use any user-controlled inputs in run commands.

name: Secrets Example

on:
  workflow_dispatch:  # Manual trigger only (this is just an example)

jobs:
  test-with-secrets:
    runs-on: ubuntu-latest

    env:
      # Map GitHub repository secrets to environment variables
      # These are automatically detected by scripts/secrets_run.py
      GH_TOKEN: ${{ secrets.GH_TOKEN }}

    steps:
      - uses: actions/checkout@v4

      - name: Install uv
        uses: astral-sh/setup-uv@v4

      - name: Run tests with secrets
        run: uv run scripts/secrets_run.py uv run pytest

      - name: Verify secrets loaded
        run: uv run scripts/secrets_run.py python -c "print('Secrets injected successfully')"
